{"changed":false,"filter":false,"title":"adminControlPanel.php","tooltip":"/Admin/adminControlPanel.php","value":"<?php \nsession_start(); \ninclude( \"../DataUtil/common.inc.php\"); \ninclude( \"../DataUtil/DataAccess.inc.php\");\n\n$roleID = $_SESSION['role'];\n\n\nif($_SESSION[ 'screenName'] && $roleID == \"Admin\"){ \ninclude '../includes/_header.php';\n$da=new DataAccess($link);\n\n// Gets list of tutors\n$getTutors=$da->get_tutors();\n\n//Gets Tutor ID when edit is clicked!\nif(isset($_GET['TutorID'])){\n\n// Gets tutor ID \n$tutorID = $_GET['TutorID'];\n//Grab tutor info by ID\n$tutorByID=$da->get_tutor_by_id($tutorID);\n//Grab tutor clock\n$tutorClockByID= $da-> get_tutor_clock($tutorID);\n//Grab tutees \n$getTutees = $da->get_tutee($tutorID);\n\n}\n\nif(isset($_POST['btnSubmitAddClock'])){\n    $newTutorClockIn = htmlentities($_POST['addClockIn']);\n    $newTutorClockOut = htmlentities($_POST['addClockOut']);\n    \n    $da->insert_new_tutor_clock($tutorID,$newTutorClockIn,$newTutorClockOut);\n     ?>\n  \n        <meta http-equiv=\"refresh\" content=\"0\">\n      <?php\n}\n\nif(isset($_GET['tutorClockID'])){\n\n// Gets tutor clock ID\n$tutorClockID = $_GET['tutorClockID'];\n\n\n\n}\nif(isset($_POST['btnSubmitAdd'])){\n    $str = htmlentities($_POST['addTutorID']);\n    $add_tutor_id = (int)$str;\n    $add_first_name = htmlentities($_POST['addFirstName']);\n    $add_last_name = htmlentities($_POST['addLastName']);\n    $add_email = htmlentities($_POST['addEmail']);\n    $add_description = htmlentities($_POST['addClassTutored']);\n    $add_Availability = htmlentities($_POST['addAvailability']);\n    $add_password = htmlentities($_POST['addPassword']);\n    \n    $da->insert_tutor($add_tutor_id, $add_first_name, $add_last_name, $add_email, $add_description, $add_Availability, $add_password);\n    \n    ?>\n  \n        <meta http-equiv=\"refresh\" content=\"0\">\n      <?php\n}\n\n//Validations for editing a tutor\nif(isset($_POST['btnSubmitEdit'])){\n    //Validations\n    \n    //\n    $new_first_name = htmlentities($_POST['FirstName']);\n    $new_last_name = htmlentities($_POST['LastName']);\n    $new_email = htmlentities($_POST['Email']);\n    $new_class_description = htmlentities($_POST['ClassTutored']);\n    $new_availability = htmlentities($_POST['Availability']);\n    $da ->update_tutor($tutorID, $new_first_name, $new_last_name, $new_email, $new_class_description, $new_availability);\n    ?>\n  \n        <meta http-equiv=\"refresh\" content=\"0\">\n      <?php\n    \n       \n    \n}\n\nif(isset($_POST['btnSubmitEditClock'])){\n    $new_Clock_In = htmlentities($_POST['clockIn']);\n    $new_Clock_Out = htmlentities($_POST['clockOut']);\n    \n    $da->update_tutor_clock($new_Clock_In,$new_Clock_Out, $tutorClockID);\n    ?>\n    \n    <meta http-equiv=\"refresh\" content=\"0\">\n    <?php\n}\n    ?>\n    \n     \n<link rel=\"stylesheet\" type=\"text/css\" href=\"../css/jquery.datetimepicker.css\"/ >\n<script type=\"text/javascript\" scr=\"../js/jquery.js\"></script>\n<script type=\"text/javascript\" src=\"../js/jquery.datetimepicker.js\"></script>\n<script>\njQuery('#datetimepicker').datetimepicker();\n</script>\n\n    \n    <div class=\"top-title-wrapper\">\n                    <div class=\"container\">\n                        <div class=\"row\">\n                            <div class=\"col-md-12 col-sm-12\">\n                                <div class=\"page-info\">\n                                    <h1 class=\"h1-page-title\">Admin</h1>\n\n                                    <h2 class=\"h2-page-desc\">\n                                       Control Panel\n                                    </h2>\n\n                                    <!-- BreadCrumb -->\n                                    <div class=\"breadcrumb-container\">\n                                        <ol class=\"breadcrumb\">\n                                            <li>\n                                                <a href=\"\">Home</a>\n                                            </li>\n                                            <li class=\"active\">Admin Control Panel</li>\n                                        </ol>\n                                    </div>\n                                    <!-- BreadCrumb -->\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n    </tbody>\n    </table>\n\n    <div class=\"tab-container\">\n        <ul class=\"etabs\">\n\n            <li class=\"tab\">\n                <a href=\"#tab1\"><i class=icon-list></i>View Tutors</a>\n            </li>\n            \n            <li class=\"tab\">\n                <a href=\"#tab2\"><i class=icon-file-add></i>Edit Tutor Info</a>\n            </li>\n\n\n            <li class=\"tab\">\n                <a href=\"#tab3\"><i class=icon-file-add></i>View Hours Worked</a>\n            </li>\n\n\n            <li class=\"tab\">\n                <a href=\"#tab4\"><i class=icon-arrow-up></i>Edit Hours Worked</a>\n            </li>\n            <li class=\"tab\">\n                <a href=\"#tab5\"><i class=icon-arrow-up></i>View Tutees</a>\n            </li>\n         \n\n\n        </ul>\n\n        <div class=\"tabs-content\">\n            <div id=\"tab1\">\n                <table class = \"table\">\n                    <thead>\n                        <th>First Name</th>\n                        <th>Last Name</th>\n                        <th>Email</th>\n                        <th>Classes Tutored</th>\n                        <th>Availability</th>\n                        <th></th>\n                    </thead>\n                    <tbody>\n                        <?php \n                        foreach($getTutors as $getTutors){ \n                        echo(\"<tr>\"); \n                        echo(\"<td>{$getTutors['TutorFirstName']}</td>\");\n                        echo(\"<td>{$getTutors['TutorLastName']}</td>\");\n                        echo(\"<td>{$getTutors['TutorEmail']}</td>\");\n                        echo(\"<td>{$getTutors['ClassDescription']}</td>\");\n                        echo(\"<td>{$getTutors['Availability']}</td>\");\n                        echo(\"<td><a href=\\\"adminControlPanel.php?TutorID={$getTutors['TutorID']}#tab2\\\">Select</a>\"); \n                        echo( \"</tr>\"); \n                        } \n                        ?>\n                    </tbody>\n                </table>\n                <form method=\"POST\">\n                    Tutor ID<br><input type=\"text\" name=\"addTutorID\" style=\"width:750px\" placeholder=\"Tutor ID\" value=\"\" required> <br>\n                    First Name<br><input type=\"text\" name=\"addFirstName\" style=\"width:750px\" placeholder=\"First Name\" value=\"\" required> <br>\n                    Last Name<br><input type=\"text\" name=\"addLastName\" style=\"width:750px\" placeholder=\"Last Name\" value=\"\" required><br>\n                    Email<br><input type=\"email\" name=\"addEmail\" style=\"width:750px\" placeholder=\"Email\" value=\"\" required><br>\n                    Class Tutored<br><textarea name=\"addClassTutored\" cols = \"50\" rows = \"4\" style=\"width:750px\" placeholder=\"Class Tutored\" value=\"\" ></textarea><br>\n                    Availability<br><textarea name=\"addAvailability\" cols = \"50\" rows = \"4\" style=\"width:750px\" placeholder=\"Availability\" value=\"\"></textarea><br>\n                    Password<br><input type=\"password\" name=\"addPassword\" style=\"width:750px\" placeholder=\"password\" value=\"\" required><br>\n                    <br>\n                \n                    <br>\n\n                    <input type=\"submit\" name=\"btnSubmitAdd\" value=\"Submit\">\n\n\n                </form>\n            </div>\n            <div id=\"tab2\">\n                <?php\n                \n                if(isset($_GET['TutorID'])){\n                    \n                    ?>\n                <form method=\"POST\">\n                    First Name<br><input type=\"text\" name=\"FirstName\" style=\"width:750px\" placeholder=\"First Name\" value=\"<?php echo $tutorByID[0]['TutorFirstName'] ?>\" required> <br>\n                    Last Name<br><input type=\"text\" name=\"LastName\" style=\"width:750px\" placeholder=\"Last Name\" value=\"<?php echo $tutorByID[0]['TutorLastName'] ?>\" required><br>\n                    Email<br><input type=\"text\" name=\"Email\" style=\"width:750px\" placeholder=\"Email\" value=\"<?php echo $tutorByID[0]['TutorEmail'] ?>\" required><br>\n                    Class Tutored<br><textarea name=\"ClassTutored\" cols = \"50\" rows = \"4\" style=\"width:750px\" placeholder=\"Class Tutored\" value=\"<?php echo $tutorByID[0]['ClassDescription'] ?>\" required/><?php echo $tutorByID[0]['ClassDescription'] ?></textarea><br>\n                    Availability<br><textarea name=\"Availability\" cols = \"50\" rows = \"4\" style=\"width:750px\" placeholder=\"Availability\" value=\"<?php echo $tutorByID[0]['Availability'] ?>\" required><?php echo $tutorByID[0]['Availability'] ?></textarea>\n                    <br>\n                \n                    <br>\n\n                    <input type=\"submit\" name=\"btnSubmitEdit\" value=\"Submit\">\n\n\n                </form>\n                <?php\n                }else{\n                    echo \"Please select a tutor.\";\n                }\n                ?>\n            </div>\n            <div id=\"tab3\">\n        <?php\n                if(isset($_GET['TutorID'])){\n                    ?>\n       <table class = \"table\">\n                    <thead>\n                        <th>Date</th>\n                        <th>Tutor In</th>\n                        <th>Tutor out</th>\n                    \n                      \n                        <th></th>\n                    </thead>\n                    <tbody>\n                        <?php \n                        \n                        foreach($tutorClockByID as $clockByID){ \n                            $date = strtotime($clockByID['tutorClockIn']);\n                            $printDate = date(\"m/d/y\", $date);\n                            $intime = strtotime($clockByID['tutorClockIn']);\n\t\t\t\t            $printInTime = date(\"g:i:a\", $intime);\n\t\t\t\t            $outTime = strtotime($clockByID['tutorClockOut']);\n\t\t\t\t            $printOutTime = date(\"g:i:a\", $outTime);\n                        echo(\"<tr>\"); \n                        echo(\"<td>$printDate</td>\");\n                        echo(\"<td>$printInTime</td>\");\n                        echo(\"<td>$printOutTime</td>\");\n                     \n                   \n                        echo(\"<td><a href=\\\"adminControlPanel.php?TutorID={$clockByID['TutorID']}&tutorClockID={$clockByID['tutorClockID']}#tab4\\\">Edit</a>\"); \n                        echo( \"</tr>\"); \n                        } \n                        ?>\n                    </tbody>\n                </table>\n                <h1>Add New Clock In/Out Time:</h1>\n                 <?php\n               if(isset($_GET['TutorID'])){\n                   ?>\n                    Format: yyyy-mm-dd hh:mm:ss:\n                    \n                    <form method=\"POST\">\n                    Clock In<br><input type=\"text\" name=\"addClockIn\" style=\"width:750px\" placeholder=\"Click In\" value=\"\" required> <br>\n                    Clock Out<br><input type=\"datetime\" name=\"addClockOut\" style=\"width:750px\" placeholder=\"Clock Out\" value=\"\" required><br>\n                    \n                    <br>\n                \n                    <br>\n\n                    <input type=\"submit\" name=\"btnSubmitAddClock\" value=\"Submit\">\n                    \n                </form>\n                  <?php\n               }\n               ?>\n                \n        <?php\n     \n\n    }else{\n        echo \"Please select a tutor.\";\n    }\n    ?>\n            </div>\n             <div id=\"tab4\">\n        <?php\n               if(isset($_GET['tutorClockID'])){\n                   ?>\n                    Format yyyy/mm/dd hh:mm:ss:\n                    <form method=\"POST\">\n                    Clock In<br><input type=\"text\" name=\"clockIn\" style=\"width:750px\" placeholder=\"First Name\" value=\"<?php echo $tutorClockByID[0]['tutorClockIn'] ?>\" required> <br>\n                    Clock Out<br><input type=\"text\" name=\"clockOut\" style=\"width:750px\" placeholder=\"Last Name\" value=\"<?php echo $tutorClockByID[0]['tutorClockOut'] ?>\" required><br>\n                    \n                    <br>\n                \n                    <br>\n\n                    <input type=\"submit\" name=\"btnSubmitEditClock\" value=\"Submit\">\n                    \n\n\n                </form>\n                <?php\n               }else{\n                   echo 'Please slect a time to edit.';\n               }\n    ?>\n            </div>\n            <div id=\"tab5\">\n                <table class = \"table\">\n                    <thead>\n                        <th>Studdent ID</th>\n                        <th>First Name</th>\n                        <th>Last Name</th>\n                        <th>Date</th>\n                        <th>Clock In</th>\n                        <th>Clock Out</th>\n                    </thead>\n                    <tbody>\n                        <?php \n                        \n                        foreach($getTutees as $tutees){ \n                            $date = strtotime($tutees['studClockIn']);\n                            $printDate = date(\"m/d/y\", $date);\n                            $intime = strtotime($tutees['studClockIn']);\n\t\t\t\t            $printInTime = date(\"g:i:a\", $intime);\n\t\t\t\t            $outTime = strtotime($tutees['studClockOut']);\n\t\t\t\t            $printOutTime = date(\"g:i:a\", $outTime);\n\t\t\t\t            \n                        echo(\"<tr>\"); \n                        echo(\"<td>{$tutees['studClockID']}</td>\");\n                        echo(\"<td>{$tutees['studFirstName']}</td>\");\n                        echo(\"<td>{$tutees['studLastName']}</td>\");\n                        echo(\"<td>$printDate</td>\");\n                        echo(\"<td>$printInTime</td>\");\n                        echo(\"<td>$printOutTime</td>\");\n                        echo( \"</tr>\"); \n                        } \n                        ?>\n                    </tbody>\n                </table>\n          \n\n            </div>\n\n        </div>\n\n    </div>\n\n    <?php \n    }else{\n    include '../includes/_header.php'; \n    echo \"<center><h1>You are not an admin</h1></center>\";\n    echo \"<center><img src='../images/you_shall_not_pass.jpg' alt='You shall not pass' style='width:304px;height:275px'></center>\";\n    echo \"<center><a href=\\\"../index.php\\\">Return Home</a></center>\";\n    }\n    \n    include '../includes/_footer.php'; \n    ?>\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":1140.5,"scrollleft":0,"selection":{"start":{"row":347,"column":49},"end":{"row":347,"column":49},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":80,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1429570634370}